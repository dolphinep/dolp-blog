(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{233:function(e,t,n){},303:function(e,t,n){},314:function(e,t,n){},315:function(e,t,n){},449:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(77),i=n.n(s),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,486)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},l=n(26),u=n(23),j=n(467),b=(n(302),n(303),n(15)),d=n(472),m=n(51),O=n(271),h={user:null};if(localStorage.getItem("dolp-token")){var p=Object(O.a)(localStorage.getItem("dolp-token"));1e3*p.exp<Date.now()?localStorage.removeItem("dolp-token"):h.user=p}var x=Object(r.createContext)({user:null,login:function(e){},logout:function(){}});function g(e,t){switch(t.type){case"LOGIN":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(m.a)(Object(m.a)({},e),{},{user:null});default:return e}}function f(e){var t=Object(r.useReducer)(g,h),n=Object(b.a)(t,2),c=n[0],s=n[1];return Object(a.jsx)(x.Provider,Object(m.a)({value:{user:c.user,login:function(e){localStorage.setItem("dolp-token",e.token),s({type:"LOGIN",payload:e})},logout:function(){localStorage.removeItem("dolp-token"),s({type:"LOGOUT"})}}},e))}var v=function(){var e=Object(r.useContext)(x),t=e.user,n=e.logout,c=window.location.pathname,s="/"===c?"home":c.substr(1),i=Object(r.useState)(s),o=Object(b.a)(i,2),u=o[0],j=o[1],m=function(e,t){var n=t.name;return j(n)};return t?Object(a.jsxs)(d.a,{pointing:!0,secondary:!0,size:"medium",color:"blue",children:[Object(a.jsx)(d.a.Item,{name:t.username,active:u===t.username,onClick:m,as:l.b,to:"/"}),Object(a.jsx)(d.a.Item,{name:"contact",active:"contact"===u,onClick:m,as:l.b,to:"/contact"}),Object(a.jsx)(d.a.Item,{name:"timer",active:"timer"===u,onClick:m,as:l.b,to:"/timer"}),Object(a.jsx)(d.a.Menu,{position:"right",children:Object(a.jsx)(d.a.Item,{name:"logout",onClick:n})})]}):Object(a.jsxs)(d.a,{pointing:!0,secondary:!0,size:"medium",color:"blue",children:[Object(a.jsx)(d.a.Item,{name:"home",active:"home"===u,onClick:m,as:l.b,to:"/"}),Object(a.jsx)(d.a.Item,{name:"contact",active:"contact"===u,onClick:m,as:l.b,to:"/contact"}),Object(a.jsx)(d.a.Item,{name:"timer",active:"timer"===u,onClick:m,as:l.b,to:"/timer"}),Object(a.jsxs)(d.a.Menu,{position:"right",children:[Object(a.jsx)(d.a.Item,{name:"login",active:"login"===u,onClick:m,as:l.b,to:"/login"}),Object(a.jsx)(d.a.Item,{name:"register",active:"register"===u,onClick:m,as:l.b,to:"/register"})]})]})},C=n(466),y=n(482),k=n(483),I=n(481),D=n(469),S=n(473),w=n(36),A=n(22),N=n.n(A);function P(){var e=Object(w.a)(["\n  {\n    getPosts {\n      id\n      title\n      body\n      createdAt\n      username\n      likeCount\n      likes {\n        username\n      }\n      commentCount\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n    }\n  }\n"]);return P=function(){return e},e}var T=N()(P()),E=n(477),R=n(284),$=n(479),L=n(91),M=n(194),H=n(145),q=n.n(H),F=n(470);var Q=function(e){var t=e.content,n=e.children;return Object(a.jsx)(F.a,{inverted:!0,content:t,trigger:n})};function z(){var e=Object(w.a)(["\n  mutation likePost($postID: ID!) {\n    likePost(postID: $postID) {\n      id\n      likes {\n        id\n        username\n      }\n      likeCount\n    }\n  }\n"]);return z=function(){return e},e}var G=N()(z()),B=function(e){var t=e.user,n=e.post,c=n.id,s=n.likeCount,i=n.likes,o=Object(r.useState)(!1),u=Object(b.a)(o,2),j=u[0],d=u[1];Object(r.useEffect)((function(){t&&i.find((function(e){return e.username===t.username}))?d(!0):d(!1)}),[t,i]);var m=Object(C.useMutation)(G,{variables:{postID:c},onError:function(e){console.log("[Like Error]: ",e)}}),O=Object(b.a)(m,1)[0],h=t?j?Object(a.jsx)($.a,{size:"small",color:"red",children:Object(a.jsx)(L.a,{name:"heart"})}):Object(a.jsx)($.a,{size:"small",color:"red",basic:!0,children:Object(a.jsx)(L.a,{name:"heart"})}):Object(a.jsx)($.a,{size:"small",as:l.b,to:"/login",color:"red",basic:!0,children:Object(a.jsx)(L.a,{name:"heart"})});return Object(a.jsxs)($.a,{as:"div",labelPosition:"right",onClick:O,children:[Object(a.jsx)(Q,{content:j?"Unlike":"Like",children:h}),Object(a.jsx)(M.a,{basic:!0,color:"red",pointing:"left",children:s})]})},U=n(475);function V(){var e=Object(w.a)(["\n  mutation deleteComment($postID: ID!, $commentID: ID!) {\n    deleteComment(postID: $postID, commentID: $commentID) {\n      id\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n      commentCount\n    }\n  }\n"]);return V=function(){return e},e}function J(){var e=Object(w.a)(["\n  mutation deletePost($postID: ID!) {\n    deletePost(postID: $postID)\n  }\n"]);return J=function(){return e},e}var _=N()(J()),W=N()(V()),K=function(e){var t=e.postID,n=e.commentID,c=(e.callback,Object(r.useState)(!1)),s=Object(b.a)(c,2),i=s[0],o=s[1],l=n?W:_,u=Object(C.useMutation)(l,{refetchQueries:[{query:T}],onError:function(e){console.log(e)},variables:{postID:t,commentID:n}}),j=Object(b.a)(u,1)[0];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Q,{content:n?"Delete comment":"Delete post",children:Object(a.jsx)($.a,{as:"div",floated:"right",icon:!0,size:"small",onClick:function(){return o(!0)},children:Object(a.jsx)(L.a,{name:"trash",style:{margin:0},size:"small"})})}),Object(a.jsx)(U.a,{open:i,onCancel:function(){return o(!1)},onConfirm:j})]})};var Y=function(e){var t=e.postID,n=e.commentID,c=(e.callback,Object(r.useState)(!1)),s=Object(b.a)(c,2),i=(s[0],s[1]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Q,{content:n?"Edit comment":"Write Story",children:Object(a.jsx)($.a,{floated:"right",icon:!0,size:"small",onClick:function(){return i(!0)},as:l.b,to:"/posts/".concat(t),children:Object(a.jsx)(L.a,{name:"pencil alternate",style:{margin:0},size:"small"})})})})};var X=function(e){var t=e.post,n=t.title,c=t.body,s=t.createdAt,i=t.id,o=t.username,u=t.likeCount,j=t.commentCount,b=t.likes,d=Object(r.useContext)(x).user;return Object(a.jsxs)(E.a,{color:"blue",fluid:!0,children:[Object(a.jsxs)(E.a.Content,{children:[Object(a.jsx)(R.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/molly.png"}),Object(a.jsx)(E.a.Header,{as:l.b,to:"/posts/".concat(i),children:n}),Object(a.jsx)(E.a.Meta,{as:l.b,to:"/posts/".concat(i),children:q()(s).fromNow(!0)}),Object(a.jsx)(E.a.Meta,{children:o}),Object(a.jsx)(E.a.Description,{children:c})]}),Object(a.jsxs)(E.a.Content,{extra:!0,children:[Object(a.jsx)(B,{user:d,post:{id:i,likes:b,likeCount:u}}),Object(a.jsx)(Q,{content:"Comment on post",children:Object(a.jsxs)($.a,{labelPosition:"right",as:l.b,to:"/posts/".concat(i),children:[Object(a.jsx)($.a,{color:"blue",basic:!0,children:Object(a.jsx)(L.a,{name:"comments"})}),Object(a.jsx)(M.a,{basic:!0,color:"blue",pointing:"left",children:j})]})}),d&&d.username===o&&Object(a.jsx)(K,{postID:i}),d&&d.username===o&&Object(a.jsx)(Y,{postID:i})]})]})},Z=n(471),ee=n(167),te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r.useState)(t),a=Object(b.a)(n,2),c=a[0],s=a[1],i=function(e){s(Object(m.a)(Object(m.a)({},c),{},Object(ee.a)({},e.target.name,e.target.value)))},o=function(t){t.preventDefault(),e()};return{onChange:i,onSubmit:o,values:c}};function ne(){var e=Object(w.a)(["\n  mutation createPost($title: String!, $body: String!) {\n    createPost(title: $title, body:$body) {\n      id\n      title\n      body\n      story\n      createdAt\n      username\n      likes {\n        id\n        username\n        createdAt\n      }\n      likeCount\n      comments {\n        id\n        body\n        username\n        createdAt\n      }\n      commentCount\n    }\n  }\n"]);return ne=function(){return e},e}var ae=N()(ne()),re=function(){var e=te((function(){i()}),{title:"",body:""}),t=e.values,n=e.onChange,r=e.onSubmit,c=Object(C.useMutation)(ae,{refetchQueries:[{query:T}],onError:function(e){console.log(e)},onCompleted:function(){t.title="",t.body=""},variables:t}),s=Object(b.a)(c,2),i=s[0],o=s[1].error;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Z.a,{onSubmit:r,children:[Object(a.jsx)(I.a,{as:"h2",children:"Create post"}),Object(a.jsxs)(Z.a.Field,{children:[Object(a.jsx)(Z.a.Input,{placeholder:"Title",name:"Title",onChange:n,value:t.title,error:!!o}),Object(a.jsx)(Z.a.TextArea,{placeholder:"Sub-Title",name:"body",onChange:n,value:t.body,error:!!o}),Object(a.jsx)($.a,{compact:!0,type:"submit",color:"blue",children:"Submit"})]})]}),o&&Object(a.jsx)("div",{className:"ui error message",style:{marginBottom:20},children:Object(a.jsx)("ul",{className:"list",children:Object(a.jsx)("li",{children:o.graphQLErrors[0].message})})})]})},ce=(n(233),n(468)),se=function(){var e="Dolp Blog",t="\u0e22\u0e34\u0e19\u0e14\u0e35\u0e15\u0e49\u0e2d\u0e19\u0e23\u0e31\u0e1a\u0e04\u0e23\u0e31\u0e1a\u0e1c\u0e21 \u0e19\u0e35\u0e48\u0e40\u0e1b\u0e47\u0e19\u0e1a\u0e25\u0e47\u0e2d\u0e04\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27\u0e02\u0e2d\u0e07\u0e1c\u0e21\u0e40\u0e2d\u0e07 \u0e16\u0e49\u0e32\u0e21\u0e35\u0e15\u0e23\u0e07\u0e44\u0e2b\u0e19\u0e41\u0e19\u0e30\u0e19\u0e33\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e04\u0e2d\u0e21\u0e40\u0e21\u0e49\u0e19 \u0e2b\u0e23\u0e37\u0e2d\u0e17\u0e31\u0e01\u0e21\u0e32\u0e04\u0e38\u0e22\u0e44\u0e14\u0e49\u0e04\u0e23\u0e31\u0e1a",n="22/JAN/2021";return Object(a.jsxs)(j.a,{textAlign:"center",children:[Object(a.jsx)(R.a,{className:"author-image",src:"https://pingbox.s3-ap-southeast-1.amazonaws.com/pictures/dolphin.png",size:"medium",centered:!0}),Object(a.jsx)(I.a,{children:e}),Object(a.jsx)("p",{children:t}),Object(a.jsx)(ce.a,{}),Object(a.jsxs)("p",{children:["update:  ",n]})]})};var ie=function(){var e=Object(r.useContext)(x).user,t=Object(C.useQuery)(T),n=t.loading,c=t.data;return Object(a.jsxs)(y.a,{style:{marginTop:"3em"},relaxed:!0,stackable:!0,reversed:"mobile",children:[Object(a.jsxs)(y.a.Column,{width:12,children:[e&&Object(a.jsx)(k.a,{children:Object(a.jsx)(re,{})}),Object(a.jsx)(y.a.Row,{className:"page-title",children:Object(a.jsx)(I.a,{as:"h2",children:"Recent Posts"})}),Object(a.jsx)(y.a,{columns:3,children:Object(a.jsx)(y.a.Row,{stretched:!0,stackable:!0,columns:2,children:n?Object(a.jsx)(D.a,{children:"Loading"}):Object(a.jsx)(S.a.Group,{children:c.getPosts&&c.getPosts.map((function(e){return Object(a.jsx)(y.a.Column,{computer:8,mobile:16,style:{marginBottom:20},children:Object(a.jsx)(X,{post:e})},e.id)}))})})})]}),Object(a.jsx)(y.a.Column,{width:4,children:Object(a.jsx)(se,{})})]})};function oe(){var e=Object(w.a)(["\n    mutation register(\n        $username: String!\n        $email: String!\n        $password: String!\n        $confirmPassword: String!\n    ){\n        register(\n            registerInput:{\n                username: $username\n                email:$email\n                password:$password\n                confirmPassword:$confirmPassword\n            }\n        ){\n            id email username createdAt token\n        }\n    }\n"]);return oe=function(){return e},e}var le=N()(oe()),ue=function(e){var t=Object(r.useContext)(x),n=Object(r.useState)({}),c=Object(b.a)(n,2),s=c[0],i=c[1],o=te((function(){O()}),{username:"",email:"",password:"",confirmPassword:""}),l=o.onChange,u=o.onSubmit,j=o.values,d=Object(C.useMutation)(le,{update:function(n,a){var r=a.data.register;t.login(r),e.history.push("/")},onError:function(e){i(e.graphQLErrors[0].extensions.exception.errors)},variables:j}),m=Object(b.a)(d,2),O=m[0],h=m[1].loading;return Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsxs)(Z.a,{onSubmit:u,noValidate:!0,className:h?"loading":"",children:[Object(a.jsx)(I.a,{as:"h2",color:"blue",textAlign:"center",children:"Register"}),Object(a.jsxs)(k.a,{children:[Object(a.jsx)(Z.a.Input,{label:"Username",placeholder:"Username...",name:"username",type:"text",value:j.username,error:!!s.username,onChange:l}),Object(a.jsx)(Z.a.Input,{label:"Email",placeholder:"Email...",name:"email",type:"email",value:j.email,error:!!s.email,onChange:l}),Object(a.jsx)(Z.a.Input,{label:"Password",placeholder:"Password...",name:"password",type:"password",value:j.password,error:!!s.password,onChange:l}),Object(a.jsx)(Z.a.Input,{label:"Confirm Password",placeholder:"Confirm Password...",name:"confirmPassword",type:"password",value:j.confirmPassword,error:!!s.confirmPassword,onChange:l}),Object(a.jsx)($.a,{type:"submit",fluid:!0,color:"blue",children:"Register"})]})]}),Object.keys(s).length>0&&Object(a.jsx)("div",{className:"ui error message",children:Object(a.jsx)("ul",{className:"list",children:Object.values(s).map((function(e){return Object(a.jsx)("li",{children:e},e)}))})})]})},je=n(478);function be(){var e=Object(w.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      id\n      email\n      username\n      createdAt\n      token\n    }\n  }\n"]);return be=function(){return e},e}var de=N()(be()),me=function(e){var t=Object(r.useContext)(x),n=Object(r.useState)({}),c=Object(b.a)(n,2),s=c[0],i=c[1],o=te((function(){O()}),{username:"",password:""}),l=o.onChange,u=o.onSubmit,j=o.values,d=Object(C.useMutation)(de,{update:function(n,a){var r=a.data.login;t.login(r),e.history.push("/")},onError:function(e){i(e.graphQLErrors[0].extensions.exception.errors)},variables:j}),m=Object(b.a)(d,2),O=m[0],h=m[1].loading;return Object(a.jsx)(y.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(a.jsxs)(y.a.Column,{style:{maxWidth:450},children:[Object(a.jsxs)(Z.a,{size:"large",onSubmit:u,noValidate:!0,className:h?"loading":"",children:[Object(a.jsxs)(I.a,{as:"h2",color:"blue",textAlign:"center",children:[Object(a.jsx)(R.a,{src:"https://www.flaticon.com/svg/static/icons/svg/3009/3009728.svg"})," Log-in to your account"]}),Object(a.jsxs)(k.a,{stacked:!0,children:[Object(a.jsx)(Z.a.Input,{placeholder:"Username..",name:"username",type:"text",icon:"user",iconPosition:"left",value:j.username,error:!!s.username,onChange:l}),Object(a.jsx)(Z.a.Input,{placeholder:"Password..",name:"password",type:"password",icon:"lock",iconPosition:"left",value:j.password,error:!!s.password,onChange:l}),Object(a.jsx)($.a,{type:"submit",fluid:!0,color:"blue",children:"Login"})]})]}),Object.keys(s).length>0&&Object(a.jsx)("div",{className:"ui error message",children:Object(a.jsx)("ul",{className:"list",children:Object.values(s).map((function(e){return Object(a.jsx)("li",{children:e},e)}))})}),Object(a.jsxs)(je.a,{children:["New to us? ",Object(a.jsx)("a",{href:"/register",children:"  Register"})]})]})})},Oe=n(476),he=n(484);n(314);var pe=function(){return Object(a.jsx)(j.a,{children:Object(a.jsxs)(E.a.Group,{centered:!0,children:[Object(a.jsx)(E.a,{children:Object(a.jsxs)(E.a.Content,{textAlign:"center",children:[Object(a.jsx)(E.a.Header,{children:"AUTHOR"}),Object(a.jsx)(ce.a,{}),Object(a.jsx)(E.a.Description,{children:"------  PING  ------"}),Object(a.jsx)(ce.a,{}),Object(a.jsx)(E.a.Description,{children:"Chulalongkorn University"}),Object(a.jsx)(ce.a,{}),Object(a.jsxs)(E.a.Description,{children:[Object(a.jsx)(L.a,{name:"mail"}),"ping.waragon@gmail.com"]}),Object(a.jsx)("br",{}),Object(a.jsxs)(E.a.Description,{children:[Object(a.jsx)(L.a,{name:"phone"}),"+66-88-585-1415"]}),Object(a.jsx)("br",{}),Object(a.jsxs)(E.a.Description,{href:"https://github.com/dolphinep",children:[Object(a.jsx)(L.a,{name:"github"}),"https://github.com/dolphinep"]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)(E.a.Description,{href:"https://medium.com/@ping.waragon",children:[Object(a.jsx)(L.a,{name:"medium"}),"https://medium.com/@ping.waragon"]})]})}),Object(a.jsx)(E.a,{children:Object(a.jsxs)(E.a.Content,{textAlign:"center",children:[Object(a.jsx)(E.a.Header,{children:"INTEREST"}),Object(a.jsx)(ce.a,{}),Object(a.jsx)(E.a.Description,{children:"INTERESTED IN ALL TECHNOLOGY ON/OUT THE EARTH"}),Object(a.jsx)(ce.a,{}),Object(a.jsx)(E.a.Description,{children:Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(Oe.a.Item,{children:"Full-Stack Developer"}),Object(a.jsx)(L.a,{name:"heart outline"}),Object(a.jsx)(Oe.a.Item,{children:"BlockChain Developer"}),Object(a.jsx)(L.a,{name:"heart outline"}),Object(a.jsx)(Oe.a.Item,{children:"Machine Learning"}),Object(a.jsx)(L.a,{name:"heart outline"}),Object(a.jsx)(Oe.a.Item,{children:"Technology Consult"})]})})]})}),Object(a.jsx)(E.a,{children:Object(a.jsxs)(E.a.Content,{textAlign:"center",children:[Object(a.jsx)(E.a.Header,{children:"SKILL"}),Object(a.jsx)(ce.a,{}),Object(a.jsx)(E.a.Description,{children:"Base on internship, classroom and self study (max 5)"}),Object(a.jsx)(ce.a,{}),Object(a.jsx)(E.a.Description,{textAlign:"left",children:Object(a.jsxs)(Oe.a,{children:[Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"thumbs up outline"}),Object(a.jsxs)(Oe.a.Content,{children:["Front-End",Object(a.jsxs)(Oe.a.List,{children:[Object(a.jsxs)(Oe.a.Item,{children:["React(4)",Object(a.jsx)(he.a,{className:"skill",maxRating:5,defaultRating:4,icon:"star"})]}),Object(a.jsxs)(Oe.a.Item,{children:["CSS/SCSS(2)",Object(a.jsx)(he.a,{className:"skill",maxRating:5,defaultRating:2,icon:"star"})]})]})]})]}),Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"thumbs up outline"}),Object(a.jsxs)(Oe.a.Content,{children:["Back-End",Object(a.jsxs)(Oe.a.List,{children:[Object(a.jsxs)(Oe.a.Item,{children:["Golang(4)",Object(a.jsx)(he.a,{className:"skill",maxRating:5,defaultRating:4,icon:"star"})]}),Object(a.jsxs)(Oe.a.Item,{children:["NodeJS(3)",Object(a.jsx)(he.a,{className:"skill",maxRating:5,defaultRating:3,icon:"star"})]})]})]})]}),Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"thumbs up outline"}),Object(a.jsxs)(Oe.a.Content,{children:["Database",Object(a.jsxs)(Oe.a.List,{children:[Object(a.jsxs)(Oe.a.Item,{children:["MongoDB(4)",Object(a.jsx)(he.a,{className:"skill",maxRating:5,defaultRating:4,icon:"star"})]}),Object(a.jsxs)(Oe.a.Item,{children:["Postgresql(4)",Object(a.jsx)(he.a,{className:"skill",maxRating:5,defaultRating:4,icon:"star"})]})]})]})]}),Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"thumbs up outline"}),Object(a.jsxs)(Oe.a.Content,{children:["OTHER SKILL",Object(a.jsxs)(Oe.a.List,{children:[Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"star"}),"CLOUD - AWS/FIREBASE"]}),Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"star"}),"GIT"]}),Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"star outline"}),"PYTHON, JAVA, C++"]}),Object(a.jsxs)(Oe.a.Item,{children:[Object(a.jsx)(L.a,{name:"star"}),"GRAPHQL"]})]})]})]})]})})]})})]})})},xe=(n(315),new Date),ge=function(){var e=Object(r.useState)(xe),t=Object(b.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){c(new Date)}),1e3);return function(){return clearInterval(e)}}),[]),Object(a.jsx)(j.a,{children:Object(a.jsx)(y.a,{columns:3,textAlign:"center",divided:!0,children:Object(a.jsxs)(y.a.Row,{className:"time",children:[Object(a.jsx)(y.a.Column,{largeScreen:"3",children:n.getHours()%12}),Object(a.jsx)(y.a.Column,{largeScreen:"3",children:n.getMinutes()}),Object(a.jsx)(y.a.Column,{largeScreen:"3",children:n.getSeconds()}),n.getHours()/12<1?"AM":"PM"]})})})},fe=n(288);var ve=function(e){var t=e.component,n=Object(fe.a)(e,["component"]),c=Object(r.useContext)(x).user;return Object(a.jsx)(u.b,Object(m.a)(Object(m.a)({},n),{},{render:function(e){return c?Object(a.jsx)(u.a,{to:"/"}):Object(a.jsx)(t,Object(m.a)({},e))}}))},Ce=n(474),ye=n(286),ke=n(147),Ie=n.n(ke),De=n(277),Se=n(217),we=n(100),Ae=n(101),Ne=n(132),Pe=n(60),Te=n(103),Ee=n(102),Re=n(75),$e=n.n(Re),Le=(n(418),n(218)),Me=n.n(Le),He=!!navigator.userAgent.match(/Trident/i),qe=function(e){Object(Te.a)(n,e);var t=Object(Ee.a)(n);function n(){var e;Object(we.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getMetaTagElements=function(e){var t=document.createElement("div");return t.innerHTML=e,t.getElementsByTagName("meta")},e}return Object(Ae.a)(n,[{key:"onPaste",value:function(){var e=Object(Se.a)(Ie.a.mark((function e(t){var a,r,c,s=this;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.clipboardData||window.clipboardData,e.next=3,a.getData("Text");case 3:r=e.sent,(c=r.match(/\b(http|https)?:\/\/\S+/gi)||[]).length>0?(t.preventDefault(),c.forEach((function(e){Me.a.get(e).then((function(e){var t,n,a,r,c=Object(De.a)(s.getMetaTagElements(e));try{for(c.s();!(r=c.n()).done;){var i=r.value;"og:title"===i.getAttribute("property")&&(t=i.getAttribute("content")),"og:image"===i.getAttribute("property")&&(n=i.getAttribute("content")),"og:url"===i.getAttribute("property")&&(a=i.getAttribute("content"))}}catch(j){c.e(j)}finally{c.f()}var o="<a href=".concat(a,' target="_blank"><div><img src=').concat(n," alt=").concat(t,' width="20%"/><span>').concat(t,"</span></div></a>"),l=s.quill.getSelection(),u=l?l.index:0;s.quill.pasteHTML(u,o,"silent"),s.quill.setSelection(u+o.length)})).catch((function(e){return console.error(e)}))}))):Object(Ne.a)(Object(Pe.a)(n.prototype),"onPaste",this).call(this,t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Re.Quill.import("modules/clipboard"));Re.Quill.register("modules/clipboard",qe,!0);var Fe=Re.Quill.import("blots/block/embed"),Qe=function(e){Object(Te.a)(n,e);var t=Object(Ee.a)(n);function n(){return Object(we.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,null,[{key:"create",value:function(e){var t=Object(Ne.a)(Object(Pe.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("alt",e.alt),t.setAttribute("width","100%"),t}},{key:"value",value:function(e){return{src:e.getAttribute("src"),alt:e.getAttribute("alt")}}}]),n}(Fe);Qe.blotName="image",Qe.tagName="img",Re.Quill.register(Qe);var ze=function(e){Object(Te.a)(n,e);var t=Object(Ee.a)(n);function n(){return Object(we.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,null,[{key:"create",value:function(e){if(e&&e.src){var t=Object(Ne.a)(Object(Pe.a)(n),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("title",e.title),t.setAttribute("width","100%"),t.setAttribute("controls",""),t}var a=document.createElement("iframe");return a.setAttribute("src",e),a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",!0),a.setAttribute("width","100%"),a}},{key:"value",value:function(e){return e.getAttribute("title")?{src:e.getAttribute("src"),alt:e.getAttribute("title")}:e.getAttribute("src")}}]),n}(Fe);ze.blotName="video",ze.tagName="video",Re.Quill.register(ze);var Ge=function(e){Object(Te.a)(n,e);var t=Object(Ee.a)(n);function n(){return Object(we.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ucca8\ubd80\ud30c\uc77c - ";var a=document.createElement("b");a.innerText=e;var r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("target","_blank"),r.setAttribute("className","file-link-inner-post"),r.appendChild(a);var c=Object(Ne.a)(Object(Pe.a)(n),"create",this).call(this);return c.appendChild(t),c.appendChild(r),c}},{key:"value",value:function(e){return e.querySelector("a").getAttribute("href")}}]),n}(Fe);Ge.blotName="file",Ge.tagName="p",Ge.className="file-inner-post",Re.Quill.register(Ge);var Be=function(e){Object(Te.a)(n,e);var t=Object(Ee.a)(n);function n(){return Object(we.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ud22c\ud45c - ";var a=document.createElement("b");a.innerText=e.title;var r=Object(Ne.a)(Object(Pe.a)(n),"create",this).call(this);return r.setAttribute("id",e.id),r.appendChild(t),r.appendChild(a),r}},{key:"value",value:function(e){return{id:e.getAttribute("id"),title:e.querySelector("b").innerText}}}]),n}(Fe);Be.blotName="poll",Be.tagName="p",Be.className="poll-inner-post",Re.Quill.register(Be);var Ue=function(e){Object(Te.a)(n,e);var t=Object(Ee.a)(n);function n(e){var a;return Object(we.a)(this,n),(a=t.call(this,e)).handleChange=function(e){console.log("html",e),a.setState({editorHtml:e},(function(){a.props.onEditorChange(a.state.editorHtml)}))},a.imageHandler=function(){a.inputOpenImageRef.current.click()},a.videoHandler=function(){a.inputOpenVideoRef.current.click()},a.fileHandler=function(){a.inputOpenFileRef.current.click()},a.insertImage=function(){var e=Object(Se.a)(Ie.a.mark((function e(t){var n,r,c;return Ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),t.preventDefault(),t.currentTarget&&t.currentTarget.files&&t.currentTarget.files.length>0&&(n=t.currentTarget.files[0],r=new FormData,c={header:{"content-type":"multipart/form-data"}},r.append("image",n),Me.a.post("/image-upload",r,c).then((function(e){if(200!==e.status)return alert("failed to upload file");var t=a.reactQuillRef.getEditor();t.focus();var r=t.getSelection(),c=r?r.index:0;t.insertEmbed(c,"image",{src:e.data.url}),t.setSelection(c+1),a._isMounted&&a.setState({files:[].concat(Object(ye.a)(a.state.files),[n])},(function(){a.props.onFilesChange(a.state.files)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.insertVideo=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];(new FormData).append("file",t)}},a.insertFile=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];(new FormData).append("file",t)}},a.modules={syntax:!0,toolbar:{container:"#toolbar",handlers:{insertImage:a.imageHandler,insertVideo:a.videoHandler,insertFile:a.fileHandler,insertPoll:a.pollHandler}}},a.formats=["header","bold","italic","underline","strike","image","video","file","link","code-block","video","blockquote","clean"],a.state={editorHtml:He?"<p>&nbsp;</p>":e.old,files:[]},a.reactQuillRef=null,a.inputOpenImageRef=c.a.createRef(),a.inputOpenVideoRef=c.a.createRef(),a.inputOpenFileRef=c.a.createRef(),a}return Object(Ae.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{id:"toolbar",children:[Object(a.jsxs)("select",{className:"ql-header",defaultValue:"",onChange:function(e){return e.persist()},children:[Object(a.jsx)("option",{value:"1"}),Object(a.jsx)("option",{value:"2"}),Object(a.jsx)("option",{value:""})]}),Object(a.jsx)("button",{className:"ql-bold"}),Object(a.jsx)("button",{className:"ql-italic"}),Object(a.jsx)("button",{className:"ql-underline"}),Object(a.jsx)("button",{className:"ql-strike"}),Object(a.jsx)("button",{className:"ql-insertImage",children:Object(a.jsx)(L.a,{name:"picture"})}),Object(a.jsx)("button",{className:"ql-link"}),Object(a.jsx)("button",{className:"ql-code-block"}),Object(a.jsx)("button",{className:"ql-video"}),Object(a.jsx)("button",{className:"ql-blockquote"}),Object(a.jsx)("button",{className:"ql-clean"})]}),Object(a.jsx)($e.a,{ref:function(t){e.reactQuillRef=t},theme:"snow",onChange:this.handleChange,modules:this.modules,formats:this.formats,value:this.state.editorHtml,placeholder:this.props.placeholder}),Object(a.jsx)("input",{type:"file",accept:"image/*",ref:this.inputOpenImageRef,style:{display:"none"},onChange:this.insertImage})]})}}]),n}(c.a.Component),Ve=n(278);function Je(){var e=Object(w.a)(["\n    mutation($postID: ID!,$title: String!, $body: String!, $story:String!) {\n        updatePost(postID: $postID, title: $title, body: $body, story: $story){\n            id\n            title\n            body\n            story\n            createdAt\n            username\n            likeCount\n            likes {\n                username\n            }\n            commentCount\n            comments {\n                id\n                username\n                createdAt\n                body\n            }\n        }\n    }\n"]);return Je=function(){return e},e}function _e(){var e=Object(w.a)(["\n    query($postID: ID!){\n        getPost(postID: $postID){\n            id\n            title\n            body\n            story\n            createdAt\n            username\n            likeCount\n            likes {\n                username\n            }\n            commentCount\n            comments {\n                id\n                username\n                createdAt\n                body\n            }\n        }\n    }\n"]);return _e=function(){return e},e}function We(){var e=Object(w.a)(["\n  mutation($postID: ID!, $body: String!) {\n    createComment(postID: $postID, body: $body) {\n      id\n      comments {\n        id\n        body\n        createdAt\n        username\n      }\n      commentCount\n    }\n  }\n"]);return We=function(){return e},e}var Ke=N()(We()),Ye=N()(_e()),Xe=N()(Je()),Ze=function(e){var t,n=e.match.params.postID,c=Object(r.useState)(""),s=Object(b.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(""),u=Object(b.a)(l,2),j=u[0],d=u[1],m=Object(r.useState)(""),O=Object(b.a)(m,2),h=O[0],p=O[1],g=Object(r.useState)(""),f=Object(b.a)(g,2),v=f[0],k=f[1],D=Object(r.useState)(!1),S=Object(b.a)(D,2),w=S[0],A=S[1],N=Object(r.useContext)(x).user,P=Object(r.useState)([]),T=Object(b.a)(P,2),H=(T[0],T[1]),F=Object(r.useRef)(null),Q=Object(C.useMutation)(Ke,{update:function(){k(""),F.current.blur()},variables:{postID:n,body:v}}),z=Object(b.a)(Q,1)[0],G=Object(C.useMutation)(Xe,{update:function(){A(!1)},variables:{postID:n,title:i,body:j,story:h}}),U=Object(b.a)(G,1)[0],V=Object(C.useQuery)(Ye,{variables:{postID:n},onCompleted:function(){o(J.title),d(J.body),p(J.story)}}).data,J=(V=void 0===V?{}:V).getPost;if(J){var _=J.id,W=J.title,Y=J.body,X=J.story,ee=J.createdAt,te=J.username,ne=J.comments,ae=J.likes,re=J.likeCount,se=J.commentCount;t=Object(a.jsxs)(y.a,{stackable:!0,children:[Object(a.jsx)(y.a.Column,{width:3,only:"computer",children:Object(a.jsx)(R.a,{src:"https://react.semantic-ui.com/images/avatar/large/molly.png",size:"small",float:"right"})}),Object(a.jsxs)(y.a.Column,{width:9,children:[Object(a.jsx)(E.a,{fluid:!0,children:Object(a.jsxs)(E.a.Content,{children:[Object(a.jsx)(E.a.Header,{children:W}),Object(a.jsx)(E.a.Meta,{children:te}),Object(a.jsx)(E.a.Meta,{children:q()(ee).fromNow()}),Object(a.jsx)(E.a.Description,{children:Y})]})}),Object(a.jsxs)(E.a.Content,{extra:!0,children:[Object(a.jsx)(B,{user:N,post:{id:_,likeCount:re,likes:ae}}),Object(a.jsxs)($.a,{as:"div",labelPosition:"right",onClick:function(){return console.log("Comment on post")},children:[Object(a.jsx)($.a,{basic:!0,color:"blue",children:Object(a.jsx)(L.a,{name:"comments"})}),Object(a.jsx)(M.a,{basic:!0,color:"blue",pointing:"left",children:se})]}),N&&N.username===te&&(w?Object(a.jsxs)($.a.Group,{floated:"right",children:[Object(a.jsx)($.a,{onClick:function(){return A(!w)},children:"Cancle"}),Object(a.jsx)($.a.Or,{}),Object(a.jsx)($.a,{color:"teal",onClick:U,children:"Save"})]}):X?Object(a.jsx)($.a,{floated:"right",color:"teal",onClick:function(){return A(!w)},children:"Edit Story"}):Object(a.jsx)($.a,{floated:"right",color:"teal",onClick:function(){return A(!w)},children:"Add Story..."}))]}),Object(a.jsx)(ce.a,{hidden:!0}),N&&(w?Object(a.jsx)(Ue,{placeholder:"Start Posting Something",old:X,onEditorChange:function(e){p(e)},onFilesChange:function(e){H(e)}}):X&&Object(Ve.a)(X)),Object(a.jsx)(I.a,{as:"h3",dividing:!0,children:"Comment"}),ne.map((function(e){return Object(a.jsx)(Ce.a.Group,{fluid:!0,children:Object(a.jsxs)(Ce.a,{children:[Object(a.jsx)(Ce.a.Avatar,{src:"https://react.semantic-ui.com/images/avatar/small/matt.jpg"}),Object(a.jsxs)(Ce.a.Content,{children:[N&&N.username===e.username&&Object(a.jsx)(K,{postID:_,commentID:e.id}),Object(a.jsx)(Ce.a.Author,{children:e.username}),Object(a.jsx)(Ce.a.Metadata,{children:q()(e.createdAt).fromNow()}),Object(a.jsx)(Ce.a.Text,{children:e.body})]})]})},e.id)})),N&&Object(a.jsx)(E.a,{fluid:!0,children:Object(a.jsxs)(E.a.Content,{children:[Object(a.jsx)("p",{children:"Post a comment"}),Object(a.jsx)(Z.a,{children:Object(a.jsxs)("div",{className:"ui action input fluid",children:[Object(a.jsx)("input",{type:"text",placeholder:"Comment..",name:"comment",value:v,onChange:function(e){return k(e.target.value)},ref:F}),Object(a.jsx)("button",{type:"submit",className:"ui button teal",disabled:""===v.trim(),onClick:z,children:"Submit"})]})})]})})]})]})}else t=Object(a.jsx)("p",{children:"Loading post..."});return t};var et=function(){return Object(a.jsx)(f,{children:Object(a.jsx)(l.a,{children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(v,{}),Object(a.jsx)(u.b,{exact:!0,path:"/",component:ie}),Object(a.jsx)(u.b,{exact:!0,path:"/contact",component:pe}),Object(a.jsx)(u.b,{exact:!0,path:"/timer",component:ge}),Object(a.jsx)(ve,{exact:!0,path:"/login",component:me}),Object(a.jsx)(ve,{exact:!0,path:"/register",component:ue}),Object(a.jsx)(u.b,{exact:!0,path:"/posts/:postID",component:Ze})]})})})},tt=n(281),nt=n(285),at=n(287),rt=n(280),ct=n(279),st=Object(at.a)({uri:"https://dolp-server.herokuapp.com/graphql"}),it=Object(ct.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map((function(e){var t=e.message,n=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))})),n&&console.log("[Network error]: ".concat(n))})),ot=Object(rt.a)((function(){var e=localStorage.getItem("dolp-token");return{headers:{Authorization:e?"Bearer ".concat(e):""}}})),lt=new tt.a({link:ot.concat(st).concat(it),cache:new nt.a}),ut=Object(a.jsx)(C.ApolloProvider,{client:lt,children:Object(a.jsx)(et,{})});i.a.render(Object(a.jsx)(c.a.StrictMode,{children:ut}),document.getElementById("root")),o()}},[[449,1,2]]]);
//# sourceMappingURL=main.71135d25.chunk.js.map